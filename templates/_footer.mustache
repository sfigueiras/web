<footer class="page-footer">
  <div class="slogan">
    <p>everytime, everywhere</p>
    <img class="arrow down" src="images/arrow-green.png" alt="green arrow down">
  </div>
  <div class="adresses">
    <p class="coffee">Wanna have a coffee?</p>

    <div class="countries">
      <div class="country">
        ARGENTINA
        <hr> Camargo 7351 1A <br> Buenos Aires <br> Tel 221 643 2575 <br>
      </div>
      <div class="country">
        ESPAÑA
        <hr> Camargo 7351 1A <br> Buenos Aires <br> Tel 221 643 2575 <br>
      </div>
    </div>
  </div>
  <div class="social">
    <div class="options">
      <p>START A PROJECT</p>
      <p>VER EN ESPAÑOL</P>
    </div>
    <p class="follow">Follow us</p>
    
    {{> _social }}
  </div>
</footer>
<script>
  document.addEventListener("DOMContentLoaded", ready, false);

  // Media query for tablet
  var mq = window.matchMedia("(min-width: 641px)");
  
  // var navigation = document.querySelector('.controls');
  var navigation = document.querySelector('.nav');
  
  if (!mq.matches) {
    var mobileNav = document.getElementById('nav-mobile');
  }
  
  
  var intersector = document.querySelector('#intersection');
  var overlay = document.querySelector('.overlay');
  var body = document.querySelector('body');
  var ubykuoCaret = document.getElementById('logo'); 

  var lastScrollTop;

  function ready() {
    lastScrollTop = scrollTop();
    
    // Bind events for all devices
    document.addEventListener('scroll', trackEnd, false);

    // Bind events for tablet
    if (mq.matches) {
      document.addEventListener('scroll', isElementInViewport, true);
      return;
    }

    // Bind events for mobile
    document.addEventListener('scroll', navDisplayer, false);    
  }

  function trackEnd() {
    if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {
       ubykuoCaret.style.animationName = 'floatingCaretUp';
    }
  } 
  
  var mobileNavVisible = false;

  function navDisplayer() {
    var st = scrollTop();

    if (st < lastScrollTop) {    
      if (!mobileNavVisible) {
        mobileNav.classList.add('show');
        mobileNavVisible = true;
      }

      var navIntersector = document.getElementById('mobile-nav-hide');
      if (_isElementInViewport(navIntersector.getBoundingClientRect())) {
        if (mobileNavVisible) {
          mobileNav.classList.remove('show');
        }
      }
      
    } else {
      if (mobileNavVisible) {
        mobileNav.classList.remove('show');
        mobileNavVisible = false;
      }
    }

    lastScrollTop = st;
  }

  function scrollTop() {
    return window.pageYOffset || document.documentElement.scrollTop;
  }

  function toggleNav() {
    overlay.classList.toggle('visible');
  }

  var intersectionPassed = false;

  function isElementInViewport(el) {
    var el = el === undefined ? intersector : el;
    var rect = el.getBoundingClientRect();

    var st = window.pageYOffset || document.documentElement.scrollTop;

    var downClass, upClass;

    if (_isElementInViewport(rect)) {
      if (mq.matches) {
        upClass = el.dataset.tabletUpClass;
        downClass = el.dataset.tabletDownClass;
      } else {
        downClass = el.dataset.mobileDownClass;
        upClass = el.dataset.mobileUpClass;
      }

      if (st > lastScrollTop) {
        navigation.classList.remove(upClass);
        navigation.classList.add(downClass);
      } else {
        navigation.classList.remove(downClass);
        navigation.classList.add(upClass);
      }
      lastScrollTop = st;

      return;
    }
  }

  function _isElementInViewport(rect) {
    return rect.top >= 0 && rect.left >= 0 &&
      rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) && /*or $(window).height() */
      rect.right <= (window.innerWidth || document.documentElement.clientWidth);
  }

</script>

<script src="js/main.js"></script>

</body>

</html>
